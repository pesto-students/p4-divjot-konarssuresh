CREATE DATABASE WareHouse;


CREATE TABLE CITIES(
	CITY CHAR(20)NOT NULL UNIQUE,
  	STATE CHAR(20)
);

CREATE TABLE WAREHOUSES(
	WID integer NOT NULL ,
  	WNAME CHAR(30),
  	LOCATION CHAR(20),
  	EXTRA_CONTENT VARCHAR(50),
  	PRIMARY KEY (WID),
  	FOREIGN KEY (LOCATION) REFERENCES CITIES(CITY)
);

Create TABLE STORES(
	SID integer NOT NULL,
  	STORENAME CHAR(20),
  	LOCATIONCITY CHAR(20),
  	WID INTEGER NOT NULL,
  	PRIMARY KEY (SID),
    FOREIGN KEY (WID) REFERENCES WAREHOUSES(WID)
);

CREATE TABLE CUSTOMERS(
	CNO integer NOT NULL,
  CNAME CHAR(50),
  ADDR VARCHAR(50),
  CUCITY CHAR(50),
   PRIMARY KEY(CNO)
);

CREATE TABLE ORDERS(
  ONO integer NOT NULL,
  ODATE DATE,
  CNO integer NOT NULL,
  PRIMARY KEY(ONO),
  FOREIGN KEY (CNO) REFERENCES CUSTOMERS(CNO)
);

CREATE TABLE ITEMS (
	ITEMNO integer NOT NULL,
  	DESCRIPTION TEXT,
    WEIGHT DECIMAL(5,2),
    COST DECIMAL(5,2),
    PRIMARY KEY(ITEMNO)
);

CREATE TABLE ITEM_ORDER(
  ITEMNO integer NOT NULL,
  ONO integer NOT NULL,
  FOREIGN KEY (ITEMNO) REFERENCES ITEMS(ITEMNO),
  FOREIGN KEY (ONO) REFERENCES ORDERS(ONO),
  PRIMARY KEY(ITEMNO,ONO)
);

CREATE TABLE STORE_ITEM(
 ITEMNO integer NOT NULL,
  SID integer NOT NULL,
  FOREIGN KEY (ITEMNO) REFERENCES ITEMS(ITEMNO),
  FOREIGN KEY (SID) REFERENCES STORES(SID),
  PRIMARY KEY (ITEMNO,SID)
);





INSERT INTO CITIES (CITY,STATE) values ("Pune","Maharashtra");
INSERT INTO WAREHOUSES (WID,WNAME,LOCATION) values (1,"warehouse 1","Pune"),(2,"warehouse 2","Pune");
INSERT INTO STORES (SID,STORENAME,LOCATIONCITY,WID) VALUES (1,"store 1","test city 66",2),(2,"second store","test city66",2),(3,"third store","test city66",1);
INSERT INTO CUSTOMERS (CNO,CNAME,ADDR,CUCITY) VALUES (1,"Mr Patil","test addr","Pune"),(2,"test2","test addr","Pune");
INSERT INTO ORDERS(ONO,ODATE,CNO) VALUES (1,"1000-01-01",1),(2,"1000-01-01",2);
INSERT INTO ITEMS(ITEMNO,DESCRIPTION,WEIGHT,COST) VALUES (1,"item1",130.50,10),(4,"item4",100,10),(3,"item3",123,10),(2,"item2",115.50,10);
INSERT INTO ITEM_ORDER(ITEMNO,ONO) VALUES (1,1),(2,1),(3,1),(4,1),(1,2),(2,2),(3,2);
INSERT INTO STORE_ITEM(ITEMNO,SID) VALUES (1,1);